light_control:

  input_number:
    light_timeout_day:
      name: Lys timeout dag
      icon: mdi:timer
      initial: 10
      min: 1
      max: 30
      step: 1
      
    light_timeout_night:
      name: Lys timeout nat
      icon: mdi:timer
      initial: 5
      min: 1
      max: 30
      step: 1

    morningbath_length:
      name: Tid lyset skal være tændt
      icon: mdi:timer
      initial: 30
      min: 5
      max: 45
      step: 5

    timeout_forgotten_light:
      name: Sluk glemt lys
      icon: mdi:timer
      initial: 10
      min: 1
      max: 15
      step: 1
    
    dim_high:
      name: Normal lysstyrke
      icon: mdi:weather-sunny
      initial: 254
      min: 0
      max: 254
      step: 1
    
    dim_low:
      name: Laveste lysstyrke
      icon: mdi:weather-night
      initial: 10
      min: 0
      max: 254
      step: 1

  input_datetime:
    morningbath_start:
      name: Badetid start
      icon: mdi:clock
      has_date: false
      has_time: true
      initial: "06:15:00"

    morningbath_end:
      name: Badetid slut
      icon: mdi:clock
      has_date: false
      has_time: true
      initial: "07:45:00"

  automation:
    - alias: "Værelser - autosluk"
      id: 53526ee5c3134c5988dcfdad30406892
      description: "Sluk lyset på værelser efter timeout"
      initial_state: true
      mode: parallel
      trigger:
        - platform: state
          entity_id:
            - group.colins_vaerelse
            - group.emilios_vaerelse
          to: "on"
          for:
            minutes: "{{ states('input_number.timeout_forgotten_light') | int }}"
      action:
        service: light.turn_off
        data:
          entity_id: "{{ trigger.entity_id }}"